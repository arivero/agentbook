name: GH-AW Issue Fast Track + Close
on:
  issues:
    types: [labeled]
permissions:
  contents: write
  issues: write
  pull-requests: write
jobs:
  agent:
    if: github.event.action == 'labeled' && github.event.label.name == 'triaged-fast-track'
    runs-on: ubuntu-latest
    steps:
      - name: Run GH-AW agent
        uses: github/agentic-workflows@v1
        with:
          engine: copilot
          tools: github:issues,github:pull_requests,edit
          prompt: |
            # Fast-track implementation and closure

            You are the fast-track delivery agent.

            ## Instructions

            - Read issue #${{ github.event.issue.number }} and confirm `triaged-fast-track` is present.
            - If missing, exit with no action.
            - Implement the smallest safe fix.
            - Open a pull request linked to the issue.
            - Post summary comment with PR link.
            - Close the issue after posting the summary.
            - If implementation is not appropriate:
              - explain why,
              - add `rejected`,
              - close the issue.

            ## Response format

            ### ‚úçÔ∏è Changes delivered
            - Files changed and why

            ### üîó Pull request
            - PR link and summary

            ### ‚úÖ Closure
            - Confirmation that the fast-track issue is closed
