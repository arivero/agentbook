name: GH-AW Issue Opinion (Copilot Delivery Model)
on:
  issues:
    types: [labeled]
permissions:
  contents: read
  issues: write
jobs:
  agent:
    if: github.event.action == 'labeled' && github.event.label.name == 'researched-waiting-opinions'
    runs-on: ubuntu-latest
    steps:
      - name: Run GH-AW agent
        uses: github/agentic-workflows@v1
        with:
          engine: copilot
          tools: github:issues
          prompt: |
            # Post slow-track delivery opinion from Copilot

            You are the Copilot delivery-model opinion agent for slow-track issues.

            ## Instructions

            - Read issue #${{ github.event.issue.number }} and all comments.
            - If `researched-waiting-opinions` is not present, exit with no action.
            - If `opinion-copilot-delivery-posted` is already present, exit with no action.
            - Use a delivery-focused Copilot model profile (implementation/developer-experience emphasis).
            - Post one delivery opinion comment.
            - Add label `opinion-copilot-delivery-posted`.
            - If the issue should be declined:
              - explain why,
              - add `rejected`,
              - close the issue.
